#!/usr/bin/env python3

import os
import sys
import logging
from pathlib import Path

# Setup logging to file only (keep stdout/stderr clean for stdio protocol)
log_file = Path(__file__).parent / "mcp-operator.log"
logging.basicConfig(
    level=logging.INFO,
    format="%(asctime)s [%(levelname)s] %(message)s",
    handlers=[logging.FileHandler(log_file)]
)
logger = logging.getLogger(__name__)

try:
    # Add the parent directory to sys.path
    current_dir = os.path.dirname(os.path.abspath(__file__))
    sys.path.insert(0, current_dir)
    
    logger.info(f"Starting MCP Operator with Python path: {sys.path}")
    logger.info(f"Current directory: {current_dir}")
    
    # Import and run the main function
    from mcp import main
    main()
except Exception as e:
    logger.error(f"Error running MCP Operator: {e}", exc_info=True)
    sys.exit(1)